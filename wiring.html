<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="SpoolBuddy Wiring Guide - Detailed wiring diagrams and pin connections for all components.">
  <title>Wiring Guide - SpoolBuddy Wiki</title>
  <link rel="icon" type="image/png" sizes="32x32" href="https://spoolbuddy.cool/assets/img/spoolbuddy_logo_dark.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/animations.css">
  <link rel="stylesheet" href="css/wiki.css">
</head>
<body>
  <div class="scroll-progress"></div>

  <nav class="navbar">
    <div class="nav-container">
      <a href="https://spoolbuddy.cool" class="nav-logo">
        <img src="https://spoolbuddy.cool/assets/img/spoolbuddy_logo_dark.png" alt="SpoolBuddy" class="logo-img">
      </a>
      <button class="nav-toggle" aria-label="Toggle navigation"><span></span><span></span><span></span></button>
      <div class="nav-links">
        <a href="https://spoolbuddy.cool" class="nav-link">Home</a>
        <a href="https://spoolbuddy.cool/features.html" class="nav-link">Features</a>
        <a href="index.html" class="nav-link active">Docs</a>
        <a href="https://discord.gg/3XFdHBkF" class="nav-cta nav-discord" target="_blank" rel="noopener">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419s.956-2.419 2.157-2.419 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419s.955-2.419 2.157-2.419 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"/></svg>
          Discord
        </a>
        <a href="https://github.com/maziggy/spoolbuddy" class="nav-cta" target="_blank" rel="noopener">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/></svg>
          GitHub
        </a>
      </div>
    </div>
  </nav>

  <section class="wiki-hero">
    <div class="container">
      <h1>Wiring <span class="text-gradient">Guide</span></h1>
      <p>Detailed wiring diagrams and pin connections for all components.</p>
    </div>
  </section>

  <section class="wiki-content">
    <div class="container">
      <div class="doc-layout">
        <aside class="doc-sidebar">
          <h4>On This Page</h4>
          <ul>
            <li><a href="#safety">Safety First</a></li>
            <li><a href="#layout">Connector Layout</a></li>
            <li><a href="#overview">Wiring Overview</a></li>
            <li><a href="#pn5180">PN5180 NFC Reader</a></li>
            <li><a href="#nau7802">NAU7802 Scale</a></li>
            <li><a href="#loadcell">Load Cell</a></li>
            <li><a href="#quickref">Quick Reference</a></li>
            <li><a href="#power">Power Requirements</a></li>
          </ul>
          <h4>Documentation</h4>
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="hardware.html">Hardware Required</a></li>
            <li><a href="wiring.html" class="active">Wiring Guide</a></li>
            <li><a href="assembly.html">Assembly Guide</a></li>
            <li><a href="firmware.html">Firmware</a></li>
            <li><a href="software.html">Software Setup</a></li>
            <li><a href="troubleshooting.html">Troubleshooting</a></li>
          </ul>
        </aside>

        <main class="doc-content">
          <h2 id="safety">Safety First</h2>
          <ul>
            <li><strong>Always disconnect power</strong> before making wiring changes</li>
            <li>Use <strong>3.3V only</strong> for the PN5180 (5V will damage it!)</li>
            <li>Double-check connections before powering on</li>
            <li>Have a multimeter ready for verification</li>
          </ul>

          <h2 id="layout">CrowPanel Connector Layout</h2>
          <div class="diagram-box">
<pre>┌─────────────────────────────────────────────────────────────────────────┐
│                     CrowPanel Advance 7.0" (Back)                       │
│                                                                         │
│   ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌─────────┐  ┌─────────┐   │
│   │UART0-OUT │  │UART1-OUT │  │ I2C-OUT  │  │   J9    │  │   J11   │   │
│   │  4-pin   │  │  4-pin   │  │  4-pin   │  │  1x7    │  │  1x7    │   │
│   │ SPI CLK  │  │  Scale   │  │          │  │  N/A!   │  │ Control │   │
│   │ SPI MISO │  │  I2C     │  │          │  │CONFLICT │  │  Pins   │   │
│   └──────────┘  └──────────┘  └──────────┘  └─────────┘  └─────────┘   │
│                                                                         │
│   [BOOT]  [RESET]                                           [USB-C]    │
│                        [DIP SWITCHES]                       [UART0-IN] │
│                           S1  S0                                       │
└─────────────────────────────────────────────────────────────────────────┘</pre>
          </div>

          <div class="alert alert-danger">
            <strong>WARNING: J9 Header Conflict!</strong><br>
            J9 header pins (IO4, IO5, IO6) are used internally by the RGB LCD display! These pins appear shorted to GND when the display is powered on. <strong>DO NOT use J9 for SPI</strong> - use UART0-OUT header instead.
          </div>

          <h2 id="overview">Wiring Diagram Overview</h2>
          <div class="diagram-box">
<pre>                                    ┌─────────────────────────────────────────┐
                                    │     ELECROW CrowPanel Advance 7.0"      │
                                    │                                         │
                                    │   ┌─────────────────────────────────┐   │
                                    │   │      7.0" Touch Display         │   │
                                    │   │         (800 x 480)             │   │
                                    │   │      [Built-in - no wiring]     │   │
                                    │   └─────────────────────────────────┘   │
                                    │                                         │
     PN5180 NFC Module              │   UART0-OUT Header                      │
    ┌──────────────────┐            │   ┌───────────────────┐                 │
    │   ┌──────────┐   │            │   │  IO43 ●──────────┼─────SCK         │
    │   │PN5180    │   │            │   │  IO44 ●──────────┼─────MISO        │
    │   │  Chip    │   │            │   │  3V3  ●──────────┼─────VCC         │
    │   └──────────┘   │            │   │  GND  ●──────────┼─────GND         │
    │   ┌──────────┐   │            │   └───────────────────┘                 │
    │   │ Antenna  │   │            │                                         │
    │   │  Coil    │   │            │   J11 Header                            │
    │   └──────────┘   │            │   ┌───────────────────┐                 │
    └──────────────────┘            │   │  IO16 ●──────────┼─────MOSI        │
            │                       │   │  IO15 ●──────────┼─────RST         │
            │                       │   │  IO2  ●──────────┼─────BUSY        │
            └───────────────────────┼───│  IO8  ●──────────┼─────NSS (CS)    │
                                    │   └───────────────────┘                 │
                                    │                                         │
     NAU7802 + Load Cell            │   UART1-OUT (or I2C-OUT)                │
    ┌──────────────────┐            │   ┌───────────────────┐                 │
    │  ┌────────────┐  │            │   │  IO19 ●──────────┼─────SDA         │
    │  │ SparkFun   │  │            │   │  IO20 ●──────────┼─────SCL         │
    │  │ Qwiic      │  │            │   │  3V3  ●──────────┼─────VCC         │
    │  │ Scale      │  │            │   │  GND  ●──────────┼─────GND         │
    │  └────────────┘  │            │   └───────────────────┘                 │
    │   ┌────┴────┐    │            │                                         │
    │   │Load Cell│    │            │   USB-C (Power & Debug)                 │
    │   │(4-wire) │    │            │   ┌───────────────────┐                 │
    │   └─────────┘    │            │   │    ○ USB-C        │                 │
    └──────────────────┘            │   └───────────────────┘                 │
                                    └─────────────────────────────────────────┘</pre>
          </div>

          <h2 id="pn5180">PN5180 NFC Reader (SPI)</h2>
          <p>The PN5180 uses SPI communication and requires 8 wires.</p>

          <h3>UART0-OUT Header (4-pin)</h3>
          <div class="diagram-box">
<pre>┌──────┬──────┬──────┬──────┐
│ Pin1 │ Pin2 │ Pin3 │ Pin4 │
│IO44  │IO43  │ 3V3  │ GND  │
│MISO  │ SCK  │ VCC  │ GND  │
└──────┴──────┴──────┴──────┘

BLUE   ───┤ IO44 : ← MISO (SPI data IN from PN5180)
YELLOW ───┤ IO43 : ← SCK  (SPI clock)
RED    ───┤ 3V3  : ← VCC  (power) ⚠️ 3.3V ONLY!
BLACK  ───┤ GND  : ← GND  (ground)</pre>
          </div>

          <h3>J11 Header (7-pin)</h3>
          <div class="diagram-box">
<pre>        J11 (Right Side)
        ┌────────┐
Pin 1   │  IO19  │   ← (Used by Scale I2C - do not use)
Pin 2   │  IO16  │   ← MOSI (SPI data OUT to PN5180)
Pin 3   │  IO15  │   ← RST  (PN5180 reset)
Pin 4   │   NC   │
Pin 5   │  IO2   │   ← BUSY (PN5180 busy signal)
Pin 6   │  IO8   │   ← NSS  (SPI chip select)
Pin 7   │   NC   │
        └────────┘

GREEN  ───┤ IO16 : ← MOSI (SPI data OUT to PN5180)
BROWN  ───┤ IO15 : ← RST
WHITE  ───┤ IO2  : ← BUSY
ORANGE ───┤ IO8  : ← NSS (chip select)</pre>
          </div>

          <h3>Complete PN5180 Pin Table</h3>
          <table class="pin-table">
            <tr><th>PN5180 Pin</th><th>ESP32-S3 GPIO</th><th>Header</th><th>Pin #</th><th>Wire Color</th></tr>
            <tr><td>VCC</td><td>3.3V</td><td>UART0-OUT</td><td>Pin 3</td><td>Red</td></tr>
            <tr><td>GND</td><td>GND</td><td>UART0-OUT</td><td>Pin 4</td><td>Black</td></tr>
            <tr><td>SCK</td><td>IO43</td><td>UART0-OUT</td><td>Pin 2</td><td>Yellow</td></tr>
            <tr><td>MISO</td><td>IO44</td><td>UART0-OUT</td><td>Pin 1</td><td>Blue</td></tr>
            <tr><td>MOSI</td><td>IO16</td><td>J11</td><td>Pin 2</td><td>Green</td></tr>
            <tr><td>NSS (CS)</td><td>IO8</td><td>J11</td><td>Pin 6</td><td>Orange</td></tr>
            <tr><td>BUSY</td><td>IO2</td><td>J11</td><td>Pin 5</td><td>White</td></tr>
            <tr><td>RST</td><td>IO15</td><td>J11</td><td>Pin 3</td><td>Brown</td></tr>
          </table>

          <h3>PN5180 Wiring Checklist</h3>
          <ul class="checklist">
            <li>VCC connected to 3.3V (NOT 5V!)</li>
            <li>GND connected to GND</li>
            <li>SCK → UART0-OUT Pin 2 (IO43)</li>
            <li>MISO → UART0-OUT Pin 1 (IO44)</li>
            <li>MOSI → J11 Pin 2 (IO16)</li>
            <li>NSS → J11 Pin 6 (IO8)</li>
            <li>BUSY → J11 Pin 5 (IO2)</li>
            <li>RST → J11 Pin 3 (IO15)</li>
          </ul>

          <h2 id="nau7802">NAU7802 Scale ADC (I2C)</h2>
          <p>The NAU7802 uses I2C communication and requires only 4 wires.</p>

          <h3>UART1-OUT Header (4-pin)</h3>
          <div class="diagram-box">
<pre>┌──────┬──────┬──────┬──────┐
│ Pin1 │ Pin2 │ Pin3 │ Pin4 │
│IO19  │IO20  │ 3V3  │ GND  │
│ SDA  │ SCL  │ VCC  │ GND  │
└──────┴──────┴──────┴──────┘

YELLOW ───┤ IO19 : ← SDA (I2C data)
WHITE  ───┤ IO20 : ← SCL (I2C clock)
RED    ───┤ 3V3  : ← VCC (power)
BLACK  ───┤ GND  : ← GND (ground)</pre>
          </div>

          <table class="pin-table">
            <tr><th>NAU7802 Pin</th><th>ESP32-S3 GPIO</th><th>Header</th><th>Pin #</th><th>Wire Color</th></tr>
            <tr><td>VCC</td><td>3.3V</td><td>UART1-OUT</td><td>Pin 3</td><td>Red</td></tr>
            <tr><td>GND</td><td>GND</td><td>UART1-OUT</td><td>Pin 4</td><td>Black</td></tr>
            <tr><td>SDA</td><td>IO19</td><td>UART1-OUT</td><td>Pin 1</td><td>Yellow</td></tr>
            <tr><td>SCL</td><td>IO20</td><td>UART1-OUT</td><td>Pin 2</td><td>White</td></tr>
          </table>

          <h2 id="loadcell">Load Cell to NAU7802</h2>
          <p>Connect the load cell's 4 wires to the NAU7802's screw terminals.</p>

          <div class="diagram-box">
<pre>   Load Cell (5kg)                SparkFun Qwiic Scale
  ┌─────────────────┐            ┌─────────────────┐
  │  Red ───────────┼────────────┤► E+ (Red)       │
  │  Black ─────────┼────────────┤► E- (Black)     │
  │  White ─────────┼────────────┤► A- (White)     │
  │  Green ─────────┼────────────┤► A+ (Green)     │
  │   ┌─────────┐   │            │                 │
  │   │ Strain  │   │            │                 │
  │   │ Gauge   │   │            │                 │
  │   └─────────┘   │            │                 │
  └─────────────────┘            └─────────────────┘</pre>
          </div>

          <table>
            <tr><th>Load Cell Wire</th><th>NAU7802 Terminal</th><th>Function</th></tr>
            <tr><td>Red</td><td>E+</td><td>Excitation +</td></tr>
            <tr><td>Black</td><td>E-</td><td>Excitation -</td></tr>
            <tr><td>White</td><td>A-</td><td>Signal -</td></tr>
            <tr><td>Green</td><td>A+</td><td>Signal +</td></tr>
          </table>

          <div class="alert alert-info">
            <strong>Note:</strong> Wire colors vary by manufacturer. If readings are negative or erratic, try swapping A+ and A-.
          </div>

          <h2 id="quickref">Quick Reference Card</h2>
          <div class="diagram-box">
<pre>┌────────────────────────────────────────────────────────────┐
│           SPOOLBUDDY QUICK WIRING (CrowPanel 7.0")         │
├────────────────────────────────────────────────────────────┤
│                                                            │
│  *** DO NOT USE J9 HEADER - CONFLICTS WITH LCD ***         │
│                                                            │
│  PN5180 (NFC)              NAU7802 (Scale)                 │
│  ───────────               ──────────────                  │
│  VCC  → UART0 Pin3 (3V3)   VCC → UART1 Pin3 (3V3)         │
│  GND  → UART0 Pin4 (GND)   GND → UART1 Pin4 (GND)         │
│  SCK  → UART0 Pin2 (IO43)  SDA → UART1 Pin1 (IO19)        │
│  MISO → UART0 Pin1 (IO44)  SCL → UART1 Pin2 (IO20)        │
│  MOSI → J11 Pin2 (IO16)                                    │
│  CS   → J11 Pin6 (IO8)     Load Cell → Qwiic terminal     │
│  BUSY → J11 Pin5 (IO2)       Red   → E+                   │
│  RST  → J11 Pin3 (IO15)      Black → E-                   │
│                              White → A-                    │
│  Power: USB-C 5V/2A          Green → A+                   │
│                                                            │
└────────────────────────────────────────────────────────────┘</pre>
          </div>

          <h2 id="power">Power Requirements</h2>
          <table>
            <tr><th>Component</th><th>Voltage</th><th>Current (typical)</th><th>Current (peak)</th></tr>
            <tr><td>CrowPanel 7.0"</td><td>5V (via USB)</td><td>300mA</td><td>600mA</td></tr>
            <tr><td>PN5180</td><td>3.3V</td><td>80mA</td><td>150mA</td></tr>
            <tr><td>NAU7802</td><td>3.3V</td><td>1mA</td><td>2mA</td></tr>
            <tr><td><strong>Total</strong></td><td><strong>5V USB</strong></td><td><strong>~400mA</strong></td><td><strong>~750mA</strong></td></tr>
          </table>

          <div class="alert alert-success">
            <strong>Recommendation:</strong> Use a quality USB-C cable and 5V/2A power adapter.
          </div>

          <nav class="doc-nav">
            <a href="hardware.html">
              <span>Previous</span>
              <span>Hardware Required</span>
            </a>
            <a href="assembly.html" class="next">
              <span>Next</span>
              <span>Assembly Guide</span>
            </a>
          </nav>
        </main>
      </div>
    </div>
  </section>

  <footer class="footer">
    <div class="container">
      <div class="footer-bottom">
        <p>SpoolBuddy is open source under the MIT License.</p>
        <div class="footer-social">
          <a href="https://github.com/maziggy/spoolbuddy" target="_blank" rel="noopener" aria-label="GitHub">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/></svg>
          </a>
          <a href="https://discord.gg/3XFdHBkF" target="_blank" rel="noopener" aria-label="Discord">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419s.956-2.419 2.157-2.419 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419s.955-2.419 2.157-2.419 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"/></svg>
          </a>
        </div>
      </div>
    </div>
  </footer>

  <script src="js/main.js"></script>
</body>
</html>
